# AIãƒãƒ£ãƒƒãƒˆ â†” ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼åŒæœŸ å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ

## å®Œäº†æ—¥æ™‚
2025å¹´11æœˆ26æ—¥

## æ¦‚è¦

Oreza Simple Chatã§ä½œæˆã—ãŸäºˆå®šãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2ãƒšãƒ¼ã‚¸ã«æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ãƒãƒ£ãƒƒãƒˆã¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿åŒæœŸãŒå®Œå…¨ã«å‹•ä½œã—ã¦ã„ã¾ã™ã€‚

---

## å®Ÿè£…å†…å®¹

### 1. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢

**ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢:** ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆ`oreza_calendar_v2.py`ï¼‰

```python
# ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸
calendars_db: Dict[str, Calendar] = {}
events_db: Dict[str, Event] = {}
learning_data = LearningData()
```

**ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼:**
- `cal_self`: è‡ªåˆ†ï¼ˆ#E91E63ï¼‰
- `cal_child`: å­ä¾›ï¼ˆ#F48FB1ï¼‰
- `cal_work`: ä»•äº‹ï¼ˆ#2196F3ï¼‰
- `cal_health`: å¥åº·ï¼ˆ#4CAF50ï¼‰
- `cal_pension`: å¹´é‡‘ï¼ˆ#FF9800ï¼‰
- `cal_live`: ãƒ©ã‚¤ãƒ–ï¼ˆ#9C27B0ï¼‰

### 2. ä¿®æ­£å†…å®¹

#### å•é¡Œ
`app.py`ã®`get_events`ãŒ`cal_v2.get_events()`ã‚’å‘¼ã³å‡ºã—ã¦ã„ãŸãŒã€`oreza_calendar_v2.py`ã«`get_events()`é–¢æ•°ãŒå­˜åœ¨ã—ãªã‹ã£ãŸã€‚

#### è§£æ±ºç­–
`oreza_calendar_v2.py`ã«`get_events()`é–¢æ•°ã‚’è¿½åŠ ï¼š

```python
def get_events(start_date: Optional[str] = None, end_date: Optional[str] = None) -> List[Event]:
    """äºˆå®šã‚’å–å¾—ï¼ˆæ—¥ä»˜ç¯„å›²æŒ‡å®šå¯èƒ½ï¼‰"""
    if start_date and end_date:
        result = []
        for event in events_db.values():
            event_date = event.start_datetime[:10]
            if start_date <= event_date <= end_date:
                result.append(event)
        return sorted(result, key=lambda x: x.start_datetime)
    else:
        # å…¨äºˆå®šã‚’è¿”ã™
        return sorted(list(events_db.values()), key=lambda x: x.start_datetime)
```

**æ©Ÿèƒ½:**
- æ—¥ä»˜ç¯„å›²æŒ‡å®šãªã— â†’ å…¨äºˆå®šã‚’è¿”ã™
- æ—¥ä»˜ç¯„å›²æŒ‡å®šã‚ã‚Š â†’ æŒ‡å®šæœŸé–“ã®äºˆå®šã‚’è¿”ã™
- é–‹å§‹æ—¥æ™‚ã§ã‚½ãƒ¼ãƒˆ

### 3. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒãƒ£ãƒƒãƒˆç”»é¢    â”‚
â”‚  (index.html)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ ã€Œä»Šæ—¥ã®åˆå¾Œ3æ™‚ã«ç—…é™¢ã€
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AIãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒAPI            â”‚
â”‚ POST /api/ai/calendar/dispatch â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ parse_nl_for_calendar()
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LLM (gpt-4.1-mini)          â”‚
â”‚ ã‚¤ãƒ³ãƒ†ãƒ³ãƒˆæ¨å®š              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ {"intent": "CREATE_EVENT", ...}
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ create_event_v2()           â”‚
â”‚ (app.py)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ cal_v2.create_event()
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ events_db                   â”‚
â”‚ (oreza_calendar_v2.py)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2ãƒšãƒ¼ã‚¸          â”‚
â”‚ (calendar_v2.html)          â”‚
â”‚ GET /api/calendar/v2/events â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ãƒ†ã‚¹ãƒˆçµæœ

### âœ… ãƒ†ã‚¹ãƒˆ1: ãƒãƒ£ãƒƒãƒˆã§äºˆå®šä½œæˆ

**å…¥åŠ›:**
```
ä»Šæ—¥ã®åˆå¾Œ3æ™‚ã«ç—…é™¢
```

**APIå¿œç­”:**
```json
{
  "success": true,
  "intent": "CREATE_EVENT",
  "result": {
    "id": "evt_1",
    "calendar_id": "health",
    "title": "ç—…é™¢",
    "start_datetime": "2025-11-25T15:00:00+09:00",
    "end_datetime": "2025-11-25T16:00:00+09:00",
    "reminder_minutes": 30,
    "status": "pending"
  },
  "message": "äºˆå®šã€Œç—…é™¢ã€ã‚’ä½œæˆã—ã¾ã—ãŸã€‚"
}
```

âœ… **æˆåŠŸ**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ’ãƒ³ãƒˆã€Œå¥åº·ã€ã‚’æ­£ã—ãæ¨å®šã—ã€healthã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ä½œæˆ

### âœ… ãƒ†ã‚¹ãƒˆ2: å…¨ã‚¤ãƒ™ãƒ³ãƒˆå–å¾—

**API:**
```
GET /api/calendar/v2/events
```

**å¿œç­”:**
```json
[
  {
    "id": "evt_1",
    "calendar_id": "health",
    "title": "ç—…é™¢",
    "start_datetime": "2025-11-25T15:00:00+09:00",
    "end_datetime": "2025-11-25T16:00:00+09:00",
    "reminder_minutes": 30,
    "status": "pending"
  }
]
```

âœ… **æˆåŠŸ**: ãƒãƒ£ãƒƒãƒˆã§ä½œæˆã—ãŸäºˆå®šãŒæ­£ã—ãå–å¾—ã§ãã‚‹

### âœ… ãƒ†ã‚¹ãƒˆ3: æ—¥ä»˜ç¯„å›²æŒ‡å®šã§å–å¾—

**API:**
```
GET /api/calendar/v2/events?start_date=2025-11-25&end_date=2025-11-25
```

**å¿œç­”:**
```json
[
  {
    "id": "evt_1",
    "calendar_id": "health",
    "title": "ç—…é™¢",
    "start_datetime": "2025-11-25T15:00:00+09:00",
    "end_datetime": "2025-11-25T16:00:00+09:00",
    "reminder_minutes": 30,
    "status": "pending"
  }
]
```

âœ… **æˆåŠŸ**: æ—¥ä»˜ç¯„å›²æŒ‡å®šã§æ­£ã—ãå–å¾—ã§ãã‚‹

---

## ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã§ã®è¡¨ç¤º

### è¡¨ç¤ºãƒ•ãƒ­ãƒ¼

1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2ãƒšãƒ¼ã‚¸ã‚’é–‹ã
2. `loadEvents()`ãŒå®Ÿè¡Œã•ã‚Œã‚‹
3. `GET /api/calendar/v2/events?start_date=YYYY-MM-DD&end_date=YYYY-MM-DD`ã§ã‚¤ãƒ™ãƒ³ãƒˆã‚’å–å¾—
4. å–å¾—ã—ãŸã‚¤ãƒ™ãƒ³ãƒˆã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰ã«è¡¨ç¤º

### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ’ãƒ³ãƒˆã¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼IDã®å¯¾å¿œ

| ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ’ãƒ³ãƒˆ | calendar_id | ã‚«ãƒ©ãƒ¼ | ä¾‹ |
|----------------|-------------|--------|-----|
| å¥åº· | `health` | #4CAF50ï¼ˆç·‘ï¼‰ | ç—…é™¢ã€ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã€æ­¯åŒ»è€… |
| å­ä¾› | `child` | #F48FB1ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰ | ä¿è‚²åœ’ã€å¹¼ç¨šåœ’ã€å­¦æ ¡ |
| ä»•äº‹ | `work` | #2196F3ï¼ˆé’ï¼‰ | ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€ä¼šè­°ã€æ‰“ã¡åˆã‚ã› |
| å¹´é‡‘ | `pension` | #FF9800ï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ï¼‰ | å¹´é‡‘ã€å½¹æ‰€ã€å¸‚å½¹æ‰€ |
| ãƒ©ã‚¤ãƒ– | `live` | #9C27B0ï¼ˆç´«ï¼‰ | ãƒ©ã‚¤ãƒ–ã€é…ä¿¡ã€ã‚³ãƒ³ã‚µãƒ¼ãƒˆ |
| ç”Ÿæ´» | `cal_self` | #E91E63ï¼ˆèµ¤ï¼‰ | ã‚´ãƒŸå‡ºã—ã€æƒé™¤ã€è²·ã„ç‰© |
| è‡ªåˆ† | `cal_self` | #E91E63ï¼ˆèµ¤ï¼‰ | ãã®ä»– |

---

## ä½¿ã„æ–¹

### 1. ãƒãƒ£ãƒƒãƒˆã§äºˆå®šã‚’ä½œæˆ

**ä¾‹:**
- ã€Œæ˜æ—¥ã®æœ9æ™‚ã«ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã€
- ã€Œ8æœˆ8æ—¥ã®15æ™‚åŠã‹ã‚‰1æ™‚é–“ã€ç³–å°¿ç—…ã‚¯ãƒªãƒ‹ãƒƒã‚¯ã€
- ã€Œä»Šæ—¥ã®åˆå¾Œ3æ™‚ã«ç—…é™¢ã€
- ã€Œæ¥é€±ã®ç«æ›œæ—¥14æ™‚ã«æ­¯åŒ»è€…ã€

### 2. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã§ç¢ºèª

1. ãƒãƒ£ãƒƒãƒˆã§äºˆå®šä½œæˆå¾Œã€ã€ŒğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ç¢ºèªã€ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2ãƒšãƒ¼ã‚¸ãŒé–‹ã
3. ä½œæˆã—ãŸäºˆå®šãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰ã«è¡¨ç¤ºã•ã‚Œã‚‹

### 3. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã‹ã‚‰äºˆå®šã‚’ä½œæˆ

1. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2ãƒšãƒ¼ã‚¸ã§ã€Œ+ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. äºˆå®šä½œæˆãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›
3. ã€Œä½œæˆã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
4. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚°ãƒªãƒƒãƒ‰ã«äºˆå®šãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

## æŠ€è¡“çš„ãªè©³ç´°

### ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

**ç¾åœ¨:** ã‚¤ãƒ³ãƒ¡ãƒ¢ãƒªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼ˆã‚µãƒ¼ãƒãƒ¼å†èµ·å‹•ã§æ¶ˆãˆã‚‹ï¼‰

**å°†æ¥ï¼ˆv3ï¼‰:** PostgreSQL/Neonã¸ã®ç§»è¡Œäºˆå®š

### API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|---------------|---------|------|
| `/api/ai/calendar/dispatch` | POST | AIãƒãƒ£ãƒƒãƒˆã‹ã‚‰ã®äºˆå®šæ“ä½œ |
| `/api/calendar/v2/events` | GET | äºˆå®šä¸€è¦§å–å¾— |
| `/api/calendar/v2/events` | POST | äºˆå®šä½œæˆ |
| `/api/calendar/v2/events/{id}` | PUT | äºˆå®šæ›´æ–° |
| `/api/calendar/v2/events/{id}` | DELETE | äºˆå®šå‰Šé™¤ |
| `/api/calendar/v2/calendars` | GET | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ä¸€è¦§å–å¾— |

### AIæ©Ÿèƒ½

1. **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ¨å®š**: ã‚¿ã‚¤ãƒˆãƒ«ã¨å ´æ‰€ã‹ã‚‰ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è‡ªå‹•æ¨å®š
2. **æ™‚é–“è£œå®Œ**: çµ‚äº†æ™‚åˆ»ãŒæœªæŒ‡å®šã®å ´åˆã€æ‰€è¦æ™‚é–“ã‚’æ¨å®š
3. **ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æœ€é©åŒ–**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã”ã¨ã«æœ€é©ãªãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ™‚é–“ã‚’å­¦ç¿’

---

## ã¾ã¨ã‚

ãƒãƒ£ãƒƒãƒˆã§ä½œæˆã—ãŸäºˆå®šãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã«æ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚ãƒ‡ãƒ¼ã‚¿åŒæœŸãŒå®Œå…¨ã«å‹•ä½œã—ã¦ãŠã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒãƒ£ãƒƒãƒˆã¨ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ä¸¡æ–¹ã§äºˆå®šã‚’ç®¡ç†ã§ãã¾ã™ã€‚

**ä¸»ãªæˆæœ:**
- âœ… ãƒãƒ£ãƒƒãƒˆã§äºˆå®šä½œæˆ â†’ ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2ã®ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢ã«ä¿å­˜
- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼v2 API â†’ ä¿å­˜ã•ã‚ŒãŸäºˆå®šã‚’å–å¾—
- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ â†’ ãƒãƒ£ãƒƒãƒˆã§ä½œæˆã—ãŸäºˆå®šã‚’è¡¨ç¤º
- âœ… ãƒ‡ãƒ¼ã‚¿åŒæœŸ â†’ æ­£å¸¸å‹•ä½œ
- âœ… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ’ãƒ³ãƒˆæ¨å®š â†’ æ­£å¸¸å‹•ä½œ

**ã‚¢ã‚¯ã‚»ã‚¹URL:**
https://8000-iuqj5gy3035kremotwuh2-dc131367.manus-asia.computer

**èªè¨¼æƒ…å ±:**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: `oreza-master`
- ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `VeryStrongPass123!`

**ä½¿ã„æ–¹:**
1. ãƒãƒ£ãƒƒãƒˆã§ã€Œä»Šæ—¥ã®åˆå¾Œ3æ™‚ã«ç—…é™¢ã€ã¨å…¥åŠ›
2. ã€ŒğŸ“… ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã§ç¢ºèªã€ãƒªãƒ³ã‚¯ã‚’ã‚¯ãƒªãƒƒã‚¯
3. ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒšãƒ¼ã‚¸ã§äºˆå®šã‚’ç¢ºèª

---

## ä»Šå¾Œã®æ‹¡å¼µäºˆå®šï¼ˆv3ï¼‰

1. **ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–**: PostgreSQL/Neonã¸ã®ç§»è¡Œ
2. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ**: WebSocketã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
3. **è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã«ã‚ˆã‚‹äºˆå®šã®åˆ†é›¢
4. **é€šçŸ¥æ©Ÿèƒ½**: ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã®å®Ÿéš›ã®é€šçŸ¥é€ä¿¡
5. **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å…±æœ‰**: è¤‡æ•°ãƒ¦ãƒ¼ã‚¶ãƒ¼é–“ã§ã®äºˆå®šå…±æœ‰
6. **ç¹°ã‚Šè¿”ã—äºˆå®š**: RRULEãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚µãƒãƒ¼ãƒˆ
7. **ã‚¿ã‚¹ã‚¯æ©Ÿèƒ½**: CREATE_TASK, UPDATE_TASKã®å®Œå…¨å®Ÿè£…
